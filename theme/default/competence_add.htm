{-include file="header.htm"-}
{-include file="reference.htm"-}
<style>
	ul {list-style:none;margin:0px;}
	#rightnow ul li {
		float: left;
		margin-left: -1px;
	}
	#rightnow ul li a {
		display: block;
		width: 30px;
		height: 30px;
		line-height: 30px;
		text-align: center;
		border: 1px solid #ddd;
		background-color: #f1f1f1;
	}
</style>
<script>
$(document).ready(function(){
    $('.check:button').toggle(function(){
        $('.idarray').attr('checked','checked');
        $(this).val('不选')
    },function(){
        $('.idarray').removeAttr('checked');
        $(this).val('全选');
    })
}) 

function checked(){ 
        var isChecked = false; 
        $(".idarray").each(function(){ 
                    if($(this).attr("checked")==true || $(this).attr("checked")=="checked"){ 
                    isChecked=true; 
                    return;} 
            })
        return isChecked; 
    } 
</script>
<body>
	<input id="frame_url" type="hidden" value="{-$smarty.server.REQUEST_URI-}"/>
	<div id="container">
		<div id="wrapper">
			<div id="content">
				<div id="rightnow">
					<h3 class="reallynow"><span>权限组管理</span></h3>
				</div>

				<div id="rightnow">

				</div>

				<div id="infowrap">
					<div id="infobox">
						<div class="mini-layout" style="margin:20px;width:790px;">
							<table width="100%" border="0" cellpadding="0" cellspacing="0" class="tableborder">
								<tbody id="menu_tip" style="display:{-if in_array('tip',$menu_cookie)-}none{-/if-}">
									<tr>
										<td>
										<ul>
											<li>
												权限组操作为在栏目后的复框进行勾选，勾中代表有此权限。
											</li>
										</ul></td>
									</tr>
								</tbody>
							</table>

							<br />
							<form method="post" action="" name="form1">
								<input type="hidden" name="act" value="{-$action_name-}post">
								<input type="hidden" name="id" value="{-$competence_id-}">
								<table width="100%" border="0" cellpadding="0" cellspacing="0" class="tableborder">
									<tr class="header">
										<td colspan="2">{-$action_lang[$action_name]-}权限组</td>
									</tr>
									<tr>
										<td class="altbg1" width="32%"><B>名称:</B>
										<BR>
										<SPAN class=smalltxt>权限组名称</SPAN></td>
										<td class="altbg2" width="68%">
										<input type="text" name="competence_name" value="{-$edit_array.name-}" size="20">
										</td>
									</tr>
									<tr>
										<td width="32%" valign="top" class="altbg1"><B>权限组说明:</B>
										<BR>
										<SPAN class=smalltxt>权限组使用人群及其它的说明</SPAN></td>
										<td width="68%" class="altbg2">
											<TEXTAREA id=note name=competence_note rows="6" cols="50">{-$edit_array.note-}</TEXTAREA>
										</td>
									</tr>
								</table>
								<br />
								<script language="javascript">
									var	menu_exit_id = new Array;
									menu_exit_id[0]='{-$exit_id[0]-}';
									{-section name=big loop=$all_id.0-}
									{-assign var=dig value=$all_id.0[big]-}
									menu_exit_id[{-$dig-}]='{-$exit_id[$dig]-}';
									{-section name=dig loop=$all_id.$dig-}
									{-assign var=zig value=$all_id.$dig[dig]-}
									//menu_exit_id[{-$zig-}]='{-$exit_id[$zig]-}';

									menu_exit_id[{-$zig-}]='{-section name=competence loop=$competence.$zig-}details_{-$zig-}_{-$competence.$zig[competence].table-},{-/section-}';{-/section-}{-/section-}
								</script>
								<table width="100%" border="0" cellpadding="0" cellspacing="0" class="tableborder">
									<tr class="header">
										<td>栏目名称</td>
										
										<td align="center">
										<input type="button" class="check" value="全选">
										</td>
										<td>权限设置</td>
									</tr>
									{-section name=big loop=$all_id.0-}
									{-assign var=dig value=$all_id.0[big]-}
									<tr>
										<td width="26%" class="altbg1">&nbsp;<strong>●</strong>&nbsp;<strong>{-$name.$dig-}</strong></td>
										<td width="3%" align="center" class="altbg1">
										<input id="menu_{-$dig-}" name="competence_menu[]" class="idarray" type="checkbox" value="{-$dig-}" {-if @in_array($dig,$edit_menu_ip)-}checked{-/if-}>
										</td>
										<td class="altbg2" width="71%">&nbsp;</td>
									</tr>
									{-section name=dig loop=$all_id.$dig-}
									{-assign var=zig value=$all_id.$dig[dig]-}
									<tr id="menu_{-$dig-}">
										<td width="26%" class="altbg1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>○</strong>&nbsp;{-$name.$zig-}</td>
										<td width="3%" align="center" class="altbg1">
										<input id="menu_{-$zig-}" class="idarray" name="competence_menu[]" type="checkbox" value="{-$zig-}" {-if @in_array($zig,$edit_menu_ip)-}checked{-elseif @in_array($dig,$edit_menu_ip)-} {-else-}{-/if-}>
										</td>
										<td class="altbg2" width="71%">&nbsp;{-section name=competence loop=$competence.$zig-}
										{-$competence.$zig[competence].name-}
										<input id="menu_details_{-$zig-}_{-$competence.$zig[competence].table-}" name="competence_details[{-$zig-}][]" type="checkbox" class="checkbox" value="{-$competence.$zig[competence].table-}" 
										{-if @in_array($competence.$zig[competence].table,$edit_details_ip[$zig])-}
											checked{-elseif @in_array($zig,$edit_menu_ip)-}
										{-else-}
											disabled
										{-/if-}>
										{-/section-}</td>
									</tr>

									{-/section-}
									{-/section-}
								</table>
								<br />
								<br>
								<center>
									<input class="button" type="submit" name="submit" value="保 存">
								</center>
							</form>
							<br />
							</td></tr></table>
						</div>
					</div>
				</div>
			</div>

		</div>

	</div>
</body>

</html>
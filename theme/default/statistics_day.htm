{-include file="header.htm"-}
{-include file="reference.htm"-}
<body>
<input id="frame_url" type="hidden" value="{-$smarty.server.REQUEST_URI-}"/> 
<script src="{-$javascript_url-}amcharts.js" type="text/javascript"></script>
	
	<div id="container">
	
		<div id="wrapper">
			<div id="content">
			
				<div id="rightnow">
				<h3 class="reallynow">
					<span>当日数据（小时）</span>
					<form name="form" id="form" action="" target="mainFrame" method="post">
						<div id="date_lang"> 
							<input name="day_range" id="day_range" readonly="readonly" type="text" value="{-$day_range-}" >
<script>
	$(function() {//onChange
		$( "#day_range" ).datepicker({ 
			dateFormat: 'yy/mm/dd', 
			onClose: function(){
				now = this.value;
			}
		});
	});
</script>
							<input type="submit" value="应用">
						</div>
					</form> 
					<br />
				</h3>
			</div>
			<div id="infowrap">
				 <div><p id="chartdiv1" style="width: 100%; height: 350px;"></p></div>
			</div>
			<div id="rightnow">
				<h3 class="reallynow">
					<span>同期对比</span>
						<form name="form" id="form" action="" target="mainFrame" method="post">
						<div id="date_lang"> 
							<input name="l_range" id="l_range" readonly="readonly" type="text" value="{-$l_range-}" >
							<=>
							<input name="r_range" id="r_range" readonly="readonly" type="text" value="{-$r_range-}" >
<script>
	$(function() {//onChange
		$( "#l_range" ).datepicker({ 
			dateFormat: 'yy/mm/dd', 
			onClose: function(){
				now = this.value;
			}
		});
		$( "#r_range" ).datepicker({ 
			dateFormat: 'yy/mm/dd', 
			onClose: function(){
				now = this.value;
			}
		});
	});
</script>
							<input type="submit" value="应用">
						</div>
					</form> 
					<br />
				</h3>
			</div>
			<div id="infowrap">
				 <div><p id="chartdiv3" style="width: 100%; height: 350px;"></p></div>
			</div>
			<div id="infobox">
				<h3>访问量分布</h3>
				<table border=1>
					<thead>
						<tr>
							<th></th>
							<th>PV</th>
							<th>独立访客</th>
							<th>IP</th>
							<th>新增独立访客</th>
							<th>比例</th>
						</tr>
					</thead>
					<tbody>
					<tr align='center'>
						<td> 总计</td>
						<td> {-$pv_sum-}</td>
						<td> {-$uv_sum-}</td>
						<td> {-$ip_sum-}</td>
						<td> {-$newUv_sum-}</td>
						<td> - </td>
					</tr>
					{-foreach from=$date item=v-}
					<tr  align='center'>
						<td> {-$v.time-}</td>
						<td> {-$v.pv-}</td>
						<td> {-$v.uv-}</td>
						<td> {-$v.ip-}</td>
						<td>{-$v.newUv-}</td>
						<td> {-if $pv_sum>0 && $v.pv>0-}{-$v.pv/$pv_sum*100|round:2-} % {-else-}0{-/if-} </td>
					</tr>
					{-/foreach-}
					
					</tbody>
				</table>
			</div>
			
			{-if $is_hous_range_statistics!=1-}
			<div id="infobox">
				<h3>小时段分布</h3>
				<table border=1>
					<thead>
						<tr>
							<th>小时段</th>
							<th>PV</th>
							<th>独立访客</th>
							<th>IP</th>
							<th>新增独立访客</th>
							<th>比例</th>
						</tr>
					</thead>
					<tbody>
					{-foreach from=$hdate item=v key=aaa-}
					<tr  align='center'>
						<td> {-$v.hour-}</td>
						<td>  {-$v.pv_avg_hour-}</td>
						<td> {-$v.uv_avg_hour-}</td>
						<td>  {-$v.ip_avg_hour-}</td>
						<td> {-$v.newUv_avg_hour-}</td>
						<td>{-$v.ratio-}</td>
					</tr>
					{-/foreach-}
					
					</tbody>
				</table>
			</div>
			{-/if-}
			
			
		</div>
	</div>
</div>
</body>
<!--当日数据-->
<script type="text/javascript">
var chart;
var chartData_1 ={-$baseData-};
var average ='4';
AmCharts.ready(function () {

	// SERIAL CHART    
	chart = new AmCharts.AmSerialChart();
	chart.pathToImages = "../amcharts/images/";
   chart.zoomOutButton = {
	   backgroundColor: '#000000',
	   backgroundAlpha: 0.15
	};
	chart.backgroundColor= '#FFFFFF';
	chart.backgroundAlpha= 0.95;
	chart.dataProvider = chartData_1;
	chart.categoryField = "time2";
	//chart.addTitle("数据分析（小时）", 15);
	// AXES
	// category
	var categoryAxis = chart.categoryAxis;
	categoryAxis.labelRotation = 45;
	categoryAxis.dashLength = 1;
	categoryAxis.gridAlpha = 0.15;
	categoryAxis.axisColor = "#DADADA";

	// value                
	var valueAxis = new AmCharts.ValueAxis();
	valueAxis.axisColor = "#DADADA";
	valueAxis.dashLength = 1;
   // valueAxis.logarithmic = true; // this line makes axis logarithmic
	chart.addValueAxis(valueAxis);

	// GUIDE for average
	var guide = new AmCharts.Guide();
	guide.value = average;
	guide.lineColor = "#CC0000";
	guide.dashLength = 4;
	guide.label = "平均值";
	guide.inside = true;
	guide.lineAlpha = 1;
	valueAxis.addGuide(guide);
	
	// GRAPH 1
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#00BBCC";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "IP : [[ip]]";
	graph.title = "IP";
	graph.valueField = "ip";
	graph.lineThickness = 2;
	graph.lineColor = "#00BBCC";
	chart.addGraph(graph);
				
				// GRAPH 2
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#2E7824";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "PV : [[pv]]";
	graph.title = "pv";
	graph.valueField = "pv";
	graph.lineThickness = 2;
	graph.lineColor = "#2E7824";
	chart.addGraph(graph);
	
	// GRAPH 3
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#FF9E01";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "UV : [[uv]]";
	graph.title = "uv";
	graph.valueField = "uv";
	graph.lineThickness = 2;
	graph.lineColor = "#FF9E01";
	chart.addGraph(graph);
	
	// GRAPH 4
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#69A55C";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "newUv : [[newUv]]";
	graph.title = "newUv";
	graph.valueField = "newUv";
	graph.lineThickness = 2;
	graph.lineColor = "#69A55C";
	chart.addGraph(graph);
				
	// CURSOR
	var chartCursor = new AmCharts.ChartCursor();
	chartCursor.cursorPosition = "mouse";
	chart.addChartCursor(chartCursor);

	// SCROLLBAR
	var chartScrollbar = new AmCharts.ChartScrollbar();
	chart.addChartScrollbar(chartScrollbar);
		
	 // LEGEND
	var legend = new AmCharts.AmLegend();
	legend.markerType = "circle";
	chart.addLegend(legend);
	// WRITE
	chart.write("chartdiv1");
});      
</script>
<!--当日数据 end -->
<!--同期对比-->
 <script type="text/javascript">
var chart;
var chartData_3 ={-$compare-};
var average ='4';
AmCharts.ready(function () {

	// SERIAL CHART    
	chart = new AmCharts.AmSerialChart();
	chart.pathToImages = "../amcharts/images/";
   chart.zoomOutButton = {
	   backgroundColor: '#000000',
	   backgroundAlpha: 0.15
	};
	chart.backgroundColor= '#FFFFFF';
	chart.backgroundAlpha= 0.95;
	chart.dataProvider = chartData_3;
	chart.categoryField = "dimension";
	//chart.addTitle("日期范围分析", 15);
	// AXES
	// category
	var categoryAxis = chart.categoryAxis;
	categoryAxis.labelRotation = 45;
	categoryAxis.dashLength = 1;
	categoryAxis.gridAlpha = 0.15;
	categoryAxis.axisColor = "#DADADA";

	// value                
	var valueAxis = new AmCharts.ValueAxis();
	valueAxis.axisColor = "#DADADA";
	valueAxis.dashLength = 1;
   // valueAxis.logarithmic = true; // this line makes axis logarithmic
	chart.addValueAxis(valueAxis);

	// GUIDE for average
	var guide = new AmCharts.Guide();
	guide.value = average;
	guide.lineColor = "#CC0000";
	guide.dashLength = 4;
	guide.label = "平均值";
	guide.inside = true;
	guide.lineAlpha = 1;
	valueAxis.addGuide(guide);
	
	// GRAPH 1
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#00BBCC";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "IP : [[l_ip]]  <br>[[l_time]]";
	graph.title = "IP";
	graph.valueField = "l_ip";
	graph.lineThickness = 2;
	graph.lineColor = "#00BBCC";
	chart.addGraph(graph);
	
// GRAPH 5
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#00BBCC";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "IP : [[r_ip]]  <br>[[r_time]]";
	graph.title = "IP";
	graph.valueField = "r_ip";
	graph.lineThickness = 2;
	graph.lineColor = "#00BB00";
	chart.addGraph(graph);
	
	// GRAPH 2
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#2E7824";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "PV : [[l_pv]]  <br>[[l_time]]";
	graph.title = "pv";
	graph.valueField = "l_pv";
	graph.lineThickness = 2;
	graph.lineColor = "#2E7824";
	chart.addGraph(graph);
	
	// GRAPH 6
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#2E7824";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "PV : [[r_pv]]  <br>[[r_time]]";
	graph.title = "pv";
	graph.valueField = "r_pv";
	graph.lineThickness = 2;
	graph.lineColor = "#2E7800";
	chart.addGraph(graph);
	
	// GRAPH 3
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#FF9E01";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "UV : [[l_uv]] <br>[[l_time]]";
	graph.title = "uv";
	graph.valueField = "l_uv";
	graph.lineThickness = 2;
	graph.lineColor = "#FF9E01";
	chart.addGraph(graph);
	
	// GRAPH 7
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#FF9E01";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "UV : [[r_uv]] <br>[[r_time]]";
	graph.title = "uv";
	graph.valueField = "r_uv";
	graph.lineThickness = 2;
	graph.lineColor = "#FF9E00";
	chart.addGraph(graph);
	
	// GRAPH 4
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#69A55C";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "newUv : [[l_newUv]] <br>[[l_time]] ";
	graph.title = "newUv";
	graph.valueField = "l_newUv";
	graph.lineThickness = 2;
	graph.lineColor = "#69A55C";
	chart.addGraph(graph);
	
	
	// GRAPH 8
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	//graph.bullet = "round";
	//graph.bulletColor = "#FFFFFF";
	//graph.bulletBorderColor = "#69A55C";
	//graph.bulletBorderThickness = 2;
	graph.bulletSize = 7;
	graph.balloonText = "newUv : [[r_newUv]] <br>[[r_time]] ";
	graph.title = "newUv";
	graph.valueField = "r_newUv";
	graph.lineThickness = 2;
	graph.lineColor = "#69A500";
	chart.addGraph(graph);
	
	// CURSOR
	var chartCursor = new AmCharts.ChartCursor();
	chartCursor.cursorPosition = "mouse";
	chart.addChartCursor(chartCursor);

	// SCROLLBAR
	var chartScrollbar = new AmCharts.ChartScrollbar();
	chart.addChartScrollbar(chartScrollbar);
		
	 // LEGEND
	var legend = new AmCharts.AmLegend();
	legend.markerType = "circle";
	chart.addLegend(legend);
	// WRITE
	chart.graphs[0].hidden = true;
	chart.graphs[1].hidden = true;
	chart.graphs[4].hidden = true;
	chart.graphs[5].hidden = true;
	chart.graphs[6].hidden = true;
	chart.graphs[7].hidden = true;
	chart.write("chartdiv3");
});  
</script>
<!--同期对比 end-->
</html>
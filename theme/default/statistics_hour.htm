{-include file="header.htm"-}
{-include file="reference.htm"-}
<body>
<input id="frame_url" type="hidden" value="{-$smarty.server.REQUEST_URI-}"/>
<script src="{-$javascript_url-}amcharts.js" type="text/javascript"></script>
<div id="container">
	
	
	<div id="wrapper">
		<div id="content">
			<div id="rightnow">
				<h3 class="reallynow">
					<span>统计</span>
					<form name="form" id="form" action="" target="mainFrame" method="post">
						<div id="date_lang"> 
							<input name="minute_range" id="minute_range" readonly="readonly" type="text" value="{-$minute_range-}">
							- 
							<input type="text" id="minute_timepicker_start" name="minute_timepicker_start" value="{-$minute_timepicker_start-}" size="5"> : 
							<input type="text" id="minute_timepicker_end" name="minute_timepicker_end" value="{-$minute_timepicker_end-}" size="5">
<script>
	$('#minute_timepicker_start').timepicker();
	$('#minute_timepicker_end').timepicker();
	$(function() {//onChange
		$( "#minute_range" ).datepicker({ 
			dateFormat: 'yy-mm-dd', 
			onClose: function(){
				now = this.value;
			}
		});
	});
</script>
							<input type="submit" value="应用">
						</div>
					</form> 
					<br />
				</h3>
			</div>
			<div id="infowrap">
				<div><p id="chartdiv1" style="width:100%; height:350px;"></p></div>
			</div>
		
		
			<div id="rightnow">
				<h3 class="reallynow">
					<span>同期对比</span>
						<form name="form" id="form" action="" target="mainFrame" method="post">
						<div id="date_lang"> 
							<input name="l_range" id="l_range" readonly="readonly" type="text" value="{-$l_range-}" >
							<=>
							<input name="r_range" id="r_range" readonly="readonly" type="text" value="{-$r_range-}" >
							<input type="text" id="timepicker_start" name="timepicker_start" value="{-$start_time-}" size="5"> : 
							<input type="text" id="timepicker_end" name="timepicker_end" value="{-$end_time-}" size="5">
<script>
	$('#timepicker_start').timepicker();
	$('#timepicker_end').timepicker();
	$(function() {//onChange
		$( "#l_range" ).datepicker({ 
			dateFormat: 'yy/mm/dd', 
			onClose: function(){
				now = this.value;
			}
		});
		$( "#r_range" ).datepicker({ 
			dateFormat: 'yy/mm/dd', 
			onClose: function(){
				now = this.value;
			}
		});
	});
</script>
							<input type="submit" value="应用">
						</div>
					</form> 
					<br />
				</h3>
			</div>
			<div id="infowrap">
				 <div><p id="chartdiv3" style="width: 100%; height: 350px;"></p></div>
			</div>
			<div id="chartdiv5" style="width: 100%; height: 340px;"></div>
		</div>
	</div>
</div>
</body>

<!--同期对比-->
<script type="text/javascript">
var chart2;
var chartData_3 ={-$compare-};
var average ='4';
AmCharts.ready(function () {

	// SERIAL CHART    
	chart2 = new AmCharts.AmSerialChart();
	//chart2.pathToImages = "../amcharts/images/";
	chart2.pathToImages = "http://www.amcharts.com/lib/images/";
    chart2.zoomOutButton = {
	   backgroundColor: '#000000',
	   backgroundAlpha: 0.15
	};
	chart2.backgroundColor= '#FFFFFF';
	chart2.backgroundAlpha= 0.95;
	chart2.dataProvider = chartData_3;
	chart2.categoryField = "dimension";
	//chart2.addTitle("日期范围分析", 15);
	// AXES
	// category
	var categoryAxis = chart2.categoryAxis;
	categoryAxis.labelRotation = 45;
	categoryAxis.dashLength = 1;
	categoryAxis.gridAlpha = 0.15;
	categoryAxis.axisColor = "#DADADA";

	// value                
	var valueAxis = new AmCharts.ValueAxis();
	valueAxis.axisColor = "#DADADA";
	valueAxis.dashLength = 1;
   // valueAxis.logarithmic = true; // this line makes axis logarithmic
	chart2.addValueAxis(valueAxis);

	// GUIDE for average
	var guide = new AmCharts.Guide();
	guide.value = average;
	guide.lineColor = "#CC0000";
	guide.dashLength = 4;
	guide.label = "平均值";
	guide.inside = true;
	guide.lineAlpha = 1;
	valueAxis.addGuide(guide);
	
	// GRAPH 1
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "IP : [[l_ip]]  <br>[[l_time]]";
	graph.title = "IP";
	graph.valueField = "l_ip";
	graph.lineThickness = 2;
	graph.lineColor = "#00BBCC";
	chart2.addGraph(graph);
	
	// GRAPH 5
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "IP : [[r_ip]]  <br>[[r_time]]";
	graph.title = "IP";
	graph.valueField = "r_ip";
	graph.lineThickness = 2;
	graph.lineColor = "#00BB00";
	chart2.addGraph(graph);
	
	// GRAPH 2
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "PV : [[l_pv]]  <br>[[l_time]]";
	graph.title = "pv";
	graph.valueField = "l_pv";
	graph.lineThickness = 2;
	graph.lineColor = "#2E7824";
	chart2.addGraph(graph);
	
	// GRAPH 6
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "PV : [[r_pv]]  <br>[[r_time]]";
	graph.title = "pv";
	graph.valueField = "r_pv";
	graph.lineThickness = 2;
	graph.lineColor = "#2E7800";
	chart2.addGraph(graph);
	
	// GRAPH 3
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "UV : [[l_uv]] <br>[[l_time]]";
	graph.title = "uv";
	graph.valueField = "l_uv";
	graph.lineThickness = 2;
	graph.lineColor = "#FF9E01";
	chart2.addGraph(graph);
	
	// GRAPH 7
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "UV : [[r_uv]] <br>[[r_time]]";
	graph.title = "uv";
	graph.valueField = "r_uv";
	graph.lineThickness = 2;
	graph.lineColor = "#FF9E00";
	chart2.addGraph(graph);
	
	// GRAPH 4
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "newUv : [[l_newUv]] <br>[[l_time]] ";
	graph.title = "newUv";
	graph.valueField = "l_newUv";
	graph.lineThickness = 2;
	graph.lineColor = "#69A55C";
	chart2.addGraph(graph);
	
	// GRAPH 8
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "newUv : [[r_newUv]] <br>[[r_time]] ";
	graph.title = "newUv";
	graph.valueField = "r_newUv";
	graph.lineThickness = 2;
	graph.lineColor = "#69A500";
	chart2.addGraph(graph);
	// CURSOR
	var chartCursor = new AmCharts.ChartCursor();
	chartCursor.cursorPosition = "mouse";
	chart2.addChartCursor(chartCursor);

	// SCROLLBAR
	var chartScrollbar = new AmCharts.ChartScrollbar();
	chart2.addChartScrollbar(chartScrollbar);
		
	 // LEGEND
	var legend = new AmCharts.AmLegend();
	legend.markerType = "circle";
	chart2.addLegend(legend);
	// WRITE
	chart2.graphs[0].hidden = true;
	chart2.graphs[1].hidden = true;
	chart2.graphs[4].hidden = true;
	chart2.graphs[5].hidden = true;
	chart2.graphs[6].hidden = true;
	chart2.graphs[7].hidden = true;
	chart2.write("chartdiv3");
});  
</script>
<!--同期对比 end-->

<!--统计-->
 <script type="text/javascript">
var chart;
var chartData_1 ={-$baseData-};
var average ='4';
AmCharts.ready(function () {

	// SERIAL CHART    
	chart = new AmCharts.AmSerialChart();
	//chart.pathToImages = "../amcharts/images/";
	chart.pathToImages = "http://www.amcharts.com/lib/images/";
	chart.zoomOutButton = {
		backgroundColor: '#000000',
		backgroundAlpha: 0.15
	};
	chart.backgroundColor= '#FFFFFF';
	chart.backgroundAlpha= 0.95;
	chart.dataProvider = chartData_1;
	chart.categoryField = "time";
	//chart.addTitle("数据分析（小时）", 15);
	// AXES
	// category
	var categoryAxis = chart.categoryAxis;
	categoryAxis.labelRotation = 45;
	categoryAxis.dashLength = 1;
	categoryAxis.gridAlpha = 0.15;
	categoryAxis.axisColor = "#DADADA";

	// value                
	var valueAxis = new AmCharts.ValueAxis();
	valueAxis.axisColor = "#DADADA";
	valueAxis.dashLength = 1;
   // valueAxis.logarithmic = true; // this line makes axis logarithmic
	chart.addValueAxis(valueAxis);

	// GUIDE for average
	var guide = new AmCharts.Guide();
	guide.value = average;
	guide.lineColor = "#CC0000";
	guide.dashLength = 4;
	guide.label = "平均值";
	guide.inside = true;
	guide.lineAlpha = 1;
	valueAxis.addGuide(guide);
	
	// GRAPH 1
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "IP : [[ip]]";
	graph.title = "IP";
	graph.valueField = "ip";
	graph.lineThickness = 2;
	graph.lineColor = "#00BBCC";
	chart.addGraph(graph);
				
	// GRAPH 2
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "PV : [[pv]]";
	graph.title = "pv";
	graph.valueField = "pv";
	graph.lineThickness = 2;
	graph.lineColor = "#2E7824";
	chart.addGraph(graph);
	
	// GRAPH 3
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "UV : [[uv]]";
	graph.title = "uv";
	graph.valueField = "uv";
	graph.lineThickness = 2;
	graph.lineColor = "#FF9E01";
	chart.addGraph(graph);
	
	// GRAPH 4
	var graph = new AmCharts.AmGraph();
	graph.type = "smoothedLine";
	graph.bulletSize = 7;
	graph.balloonText = "newUv : [[newUv]]";
	graph.title = "newUv";
	graph.valueField = "newUv";
	graph.lineThickness = 2;
	graph.lineColor = "#69A55C";
	chart.addGraph(graph);
				
	// CURSOR
	var chartCursor = new AmCharts.ChartCursor();
	chartCursor.cursorPosition = "mouse";
	chart.addChartCursor(chartCursor);

	// SCROLLBAR
	var chartScrollbar = new AmCharts.ChartScrollbar();
	chart.addChartScrollbar(chartScrollbar);
		
	 // LEGEND
	var legend = new AmCharts.AmLegend();
	legend.markerType = "circle";
	chart.addLegend(legend);
	// WRITE
	chart.write("chartdiv1");
	{-if $beToday==1-}
	setInterval(function(){
		chart.dataProvider.shift();
		$.ajax({
			type: "POST",
			url: "",
			data: "minuteDataAjax=1&"+Math.random(),
			success: function(msg){
				var obj=JSON.parse(msg);
				chart.dataProvider.push(obj);
			}
		});
		chart.validateData();
	}, 60000);
	{-/if-}
});      

</script>
<!--统计 end-->

</html>